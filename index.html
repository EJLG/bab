<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu Display</title>
</head>
<body>
    <!-- 결과를 표시할 위치 -->
    <div id="menuResultContainer"></div>

    <!-- 자바스크립트 코드 -->
    <script>
        // API 엔드포인트 URL
        const api_url = "https://open.neis.go.kr/hub/mealServiceDietInfo";

        // 필요한 파라미터 설정
        const params = {
            'ATPT_OFCDC_SC_CODE': 'Q10',
            'SD_SCHUL_CODE': '8490058',
            'MMEAL_SC_CODE': '1',
            'MLSV_YMD': '20231208',
        };

        // API 요청 보내기
        fetch(`${api_url}?${new URLSearchParams(params)}`)
            .then(response => response.text())
            .then(full_text => {
                // 줄 단위로 나누기
                const lines = full_text.split('\n');

                // 5번째 줄 출력
                const lunch_menu = lines[19];

                // 필요없는 것들 제거
                const removeNumbers = /[0-9]/g;
                const removeSpecial = /[<>!().[\]/]/g;
                let cleanThings = lunch_menu.replace(removeNumbers, '').replace(removeSpecial, '');
                cleanThings = cleanThings.replace('/\/DDISH_NM/', '');
                cleanThings = cleanThings.replace('DDISH_NM', '');
                cleanThings = cleanThings.replace('CDATA', '');
                cleanThings = cleanThings.replace('br', '\n');
                cleanThings = cleanThings.replace('/', ' + ');

                const menuResult = cleanThings.substring(4);
                
                // 결과를 HTML에 표시
                const menuResultContainer = document.getElementById('menuResultContainer');
                menuResultContainer.innerText = menuResult;
            })
            .catch(error => console.error(error));
    </script>
</body>
</html>
